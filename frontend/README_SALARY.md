# 薪资查询页面使用说明

## 功能概述

新实现的薪资查询页面 (`SalaryManagement`) 提供了完整的工资管理功能，包括工资计算、查询、确认和发放等核心业务流程。

## 主要功能

### 1. 📊 数据统计面板
- **总员工数**: 显示当前月份参与工资计算的员工总数
- **总应发工资**: 显示所有员工的应发工资总额
- **总实发工资**: 显示所有员工的实发工资总额  
- **已发放数量**: 显示已完成发放的工资记录数量

### 2. 🔍 多条件搜索
- **员工工号**: 精确搜索特定员工
- **员工姓名**: 模糊搜索员工姓名
- **工资月份**: 选择特定月份查询
- **月份范围**: 设置起止月份范围查询
- **工资状态**: 多选筛选工资处理状态

### 3. 💰 工资计算功能
- **智能计算**: 基于员工基础薪资和月度考勤报告自动计算
- **批量处理**: 支持单月或指定员工范围的批量计算
- **强制重算**: 可覆盖已存在的工资记录重新计算
- **实时反馈**: 显示计算进度和详细结果

### 4. 📋 工资详情管理
- **详细展示**: 完整展示工资组成明细
- **状态流转**: 支持草稿→已计算→已确认→已发放的状态管理
- **批量操作**: 支持批量确认工资记录
- **操作日志**: 记录所有关键操作的时间和操作人

### 5. 📊 数据表格
- **分页展示**: 支持大数据量的分页查询
- **排序功能**: 支持多字段排序
- **行选择**: 支持多选进行批量操作
- **响应式设计**: 适配不同屏幕尺寸

### 6. 📄 详情查看
- **工资明细**: 详细展示各项工资构成
- **计算过程**: 显示基础工资、考勤工资、各项扣款等
- **状态追踪**: 显示计算、确认、发放等关键时间节点

### 7. 📤 数据导出
- **Excel导出**: 支持将查询结果导出为Excel文件
- **自定义筛选**: 可基于当前搜索条件导出数据

## 工资状态说明

| 状态 | 含义 | 可执行操作 |
|------|------|------------|
| 草稿 | 初始创建状态 | 编辑、删除 |
| 已计算 | 系统计算完成 | 确认、重新计算 |
| 已确认 | HR确认无误 | 标记发放 |
| 已发放 | 工资已发放 | 仅查看 |
| 已取消 | 已取消的记录 | 仅查看 |

## 操作流程

### 工资计算流程
1. 点击"计算工资"按钮
2. 选择要计算的月份
3. （可选）指定特定员工
4. （可选）选择强制重新计算
5. 点击"开始计算"执行计算
6. 查看计算结果和错误详情

### 工资确认流程
1. 在列表中找到"已计算"状态的工资记录
2. 点击确认按钮或使用批量确认功能
3. 确认后状态变更为"已确认"

### 工资发放标记
1. 在列表中找到"已确认"状态的工资记录
2. 点击发放按钮
3. 确认发放操作后状态变更为"已发放"

## 技术特性

### 前端技术栈
- **React**: 使用React Hooks进行状态管理
- **TypeScript**: 完整的类型定义确保代码质量
- **Ant Design**: 企业级UI组件库
- **dayjs**: 日期处理工具

### API集成
- **RESTful API**: 标准的REST接口调用
- **错误处理**: 完善的错误提示和处理机制
- **类型安全**: TypeScript类型定义确保接口调用安全

### 用户体验
- **响应式设计**: 适配PC和移动端设备
- **实时反馈**: 操作结果及时反馈给用户
- **加载状态**: 清晰的加载和进度提示
- **错误提示**: 友好的错误信息和解决建议

## 开发说明

### 文件结构
```
frontend/src/
├── pages/SalaryManagement/
│   └── index.tsx              # 薪资管理主页面
├── services/
│   ├── salary.ts              # 薪资API服务
│   └── index.ts               # 服务导出
└── types/
    └── index.ts               # 类型定义
```

### 主要组件
- **SalaryManagement**: 薪资管理主组件
- **SearchForm**: 搜索表单组件
- **DataTable**: 数据表格组件
- **DetailModal**: 详情查看模态框
- **CalculateModal**: 工资计算模态框

### API接口
- `getSalaryDetails()`: 查询工资详情列表
- `calculateSalary()`: 计算工资
- `confirmSalaryDetail()`: 确认工资
- `markSalaryAsPaid()`: 标记发放
- `exportSalaryDetails()`: 导出数据

## 后续改进建议

1. **员工选择器**: 在计算工资时集成员工选择组件
2. **权限控制**: 根据用户角色显示不同操作按钮
3. **数据缓存**: 优化频繁查询的性能
4. **移动端适配**: 进一步优化移动端显示效果
5. **打印功能**: 增加工资单打印功能

---

**开发时间**: 2024年12月
**版本**: v1.0
**状态**: 已完成基础功能开发
